{"version":3,"sources":["consts/consts.ts","helpers/helpers.ts","hooks/useMobile.ts","components/OrderbookFeedTable/OrderbookFeedHeader.tsx","components/OrderbookFeedTable/OrderbookFeedRow.tsx","components/OrderbookFeedTable/OrderbookFeedTable.tsx","components/Loader/Loader.tsx","components/Orderbook/currenciesPairs.ts","components/CurrencyDrawer/CurrencyDrawer.tsx","components/Orderbook/Orderbook.tsx","components/Orderbook/OrderbookContainer.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["requestAction","responseAction","orderbookPath","marketCode","marketStatsPath","apiCall","path","action","JSON","stringify","module","snapshotCall","requestId","useMobile","useState","window","innerWidth","width","setWidth","handleWindowSizeChange","useEffect","addEventListener","removeEventListener","OrderbookFeedHeader","feedType","isMobile","cryptocurrency","split","currency","className","OrderbookFeedRow","feed","map","item","ra","ca","amount","Number","toFixed","co","OrderbookFeedTable","Loader","data-testid","currenciesPairs","CurrencyDrawer","isOpen","handleClose","setMarketCode","activeMarketCode","onClick","Orderbook","topBid","topAsk","bid","ask","marketStats","isCurrencyDrawerOpen","setCurrencyDrawerOpen","max","min","length","OrderbookContainer","setBid","setAsk","updatedBid","setUpdatedBid","updatedAsk","setUpdatedAsk","setMarketStats","wsRef","useRef","preparedBid","Map","values","slice","sort","a","b","preparedAsk","disconnect","current","close","handleOrdersSnapshot","data","body","buy","sell","handleMarketStatsSnapshot","max24h","stats","h","min24h","l","handlePushOrders","message","changes","filter","state","entryType","flat","handlePushMarketStats","handleSubscribe","initFeed","newMarketCode","handleDisconnect","ws","WebSocket","send","event","parse","topic","err","console","log","initWs","unsubscribeToMarket","readyState","OPEN","subscribeToMarket","navigator","onLine","newBid","newAsk","unshift","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","undefined"],"mappings":"qSAGaA,EACO,mBADPA,EAEJ,QAFIA,EAGE,cAGFC,EACK,iBADLA,EAEL,OAFKA,EAGe,2BAKfC,EAAgB,SAACC,GAAD,kCAA6CA,EAA7C,YAhBA,KAiBhBC,EAAkB,SAACD,GAAD,sBAAiCA,ICVnDE,EAAU,SAACC,GAAD,IAAeC,EAAf,uDAAwBP,EAAxB,OACrBQ,KAAKC,UAAU,CACbF,SACAG,OAAQ,UACRJ,UAGSK,EAAe,SAACL,GAAD,OAC1BE,KAAKC,UAAU,CACbG,UAAW,uCACXL,OAAQP,EACRU,OAAQ,UACRJ,UCCWO,EAnBG,WAAO,IAAD,EACIC,mBAAiBC,OAAOC,YAD5B,mBACfC,EADe,KACRC,EADQ,KAGhBC,EAAyB,WAC7BD,EAASH,OAAOC,aAYlB,OATAI,qBAAU,WAER,OADAL,OAAOM,iBAAiB,SAAUF,GAC3B,WACLJ,OAAOO,oBAAoB,SAAUH,MAEtC,IAEcF,GAAS,K,eCGbM,EAhBa,SAAC,GAAwE,IAAtEC,EAAqE,EAArEA,SAAUrB,EAA2D,EAA3DA,WACjCsB,EAAWZ,IACXa,EAAiBvB,EAAWwB,MAAM,KAAK,GACvCC,EAAWzB,EAAWwB,MAAM,KAAK,GACvC,OACE,sBAAKE,UAAS,6CAAwCL,GAAtD,UACE,sBAAKK,UAAU,yBAAf,UACE,sBAAMA,UAAU,2BAAhB,SAA4CL,IAD9C,MAC+E,QAAbA,EAAqB,QAAU,oBAE/FC,GAAY,sBAAKI,UAAU,yBAAf,8BAAgDH,EAAhD,OACd,sBAAKG,UAAU,yBAAf,gCAAkDD,EAAlD,QACEH,GAAY,qBAAKI,UAAU,yBAAf,8BCOLC,G,MAhBU,SAAC,GAA4D,IAA1DC,EAAyD,EAAzDA,KAAMP,EAAmD,EAAnDA,SAC1BC,EAAWZ,IACjB,OACE,mCACGkB,EAAKC,KAAI,SAACC,GAAD,OACR,sBAAKJ,UAAS,uCAAkCL,GAAhD,UACE,qBAAKK,UAAU,sBAAf,SAAsCI,EAAKC,MACzCT,GAAY,qBAAKI,UAAU,sBAAf,SAAsCI,EAAKE,KACzD,qBAAKN,UAAU,sBAAf,UHVqBO,EGUgCC,OAAOJ,EAAKC,IAAMG,OAAOJ,EAAKE,IHVlCE,OAAOD,GAAQE,QAAQ,OGWtEb,GAAY,qBAAKI,UAAU,sBAAf,SAAsCI,EAAKM,OAJMN,EAAKC,IHPhD,IAACE,SIQhBI,EAPY,SAAC,GAAD,IAAGT,EAAH,EAAGA,KAAMP,EAAT,EAASA,SAAUrB,EAAnB,EAAmBA,WAAnB,OACzB,gCACE,cAAC,EAAD,CAAqBqB,SAAUA,EAAUrB,WAAYA,IACrD,cAAC,EAAD,CAAkB4B,KAAMA,EAAMP,SAAUA,QCH7BiB,G,YAFA,kBAAM,qBAAKZ,UAAU,SAASa,cAAY,uBCqD1CC,EAvDS,CACtB,UACA,UACA,WACA,UACA,UACA,WACA,WACA,WACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,WACA,UACA,UACA,WACA,UACA,UACA,UACA,WACA,WACA,YACA,UACA,UACA,UACA,UACA,WACA,UACA,YACA,UACA,UACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,UACA,UACA,WCRaC,G,MAzCQ,SAAC,GAUjB,IATLC,EASI,EATJA,OACAC,EAQI,EARJA,YACAC,EAOI,EAPJA,cACAC,EAMI,EANJA,iBAYA,OACE,qCACE,sBAAKnB,UAAS,yBAAoBgB,EAAS,uBAAyB,IAAMH,cAAY,kBAAtF,UACE,qBAAKb,UAAU,4BAA4BoB,QAASH,IACnDH,EAAgBX,KAAI,SAAC7B,GAAD,OACnB,qBAEE0B,UAAS,+BACPmB,IAAqB7C,EAAa,iCAAmC,IAEvE8C,QAAS,kBAdjBF,EAckC5C,QAblC2C,KAcQJ,cAAY,gBANd,SAQGvC,GAPIA,SAWX,qBACE8C,QAASH,EACTjB,UAAS,kCAA6BgB,EAAS,gCAAkC,WCmB1EK,EAjDG,SAAC,GAA0E,IAAD,IRHhEC,EAAgBC,EQGvBC,EAAuE,EAAvEA,IAAKC,EAAkE,EAAlEA,IAAKC,EAA6D,EAA7DA,YAAaR,EAAgD,EAAhDA,cAAe5C,EAAiC,EAAjCA,WAAiC,EACpCW,oBAAS,GAD2B,mBACnF0C,EADmF,KAC7DC,EAD6D,KAE1F,OACE,sBAAK5B,UAAU,YAAf,UACE,sBAAKA,UAAU,oBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,wBACEA,UAAU,oBACVa,cAAY,oBACZO,QAAS,kBAAMQ,GAAsB,IAHvC,SAKGtD,MAGL,sBAAK0B,UAAU,yBAAf,UACE,qBAAKA,UAAU,+BAAf,qBACA,qBAAKA,UAAU,+BAA+Ba,cAAY,cAA1D,URnBkBS,EQoBJ,UAACE,EAAI,UAAL,aAAC,EAAQnB,GRpBWkB,EQoBpB,UAAaE,EAAI,UAAjB,aAAa,EAAQpB,GRnB3CiB,GAAUC,GAAUf,OAAOe,GAAUf,OAAOc,IAASb,QAAQ,GAAK,UQsB5D,qBAAKT,UAAU,yBAAf,SACE,sBAAKA,UAAU,0BAAf,UACE,sBAAKA,UAAU,+BAAf,UACE,wDADF,IAC+B,+BAAO0B,EAAYG,SAElD,sBAAK7B,UAAU,+BAAf,UACE,wDADF,IAC+B,+BAAO0B,EAAYI,iBAKvDN,EAAIO,QAAUN,EAAIM,OACjB,sBAAK/B,UAAU,uBAAuBa,cAAY,kBAAlD,UACE,cAAC,EAAD,CAAoBX,KAAMsB,EAAK7B,SAAS,MAAMrB,WAAYA,IAC1D,cAAC,EAAD,CAAoB4B,KAAMuB,EAAK9B,SAAS,MAAMrB,WAAYA,OAG5D,cAAC,EAAD,IAEF,cAAC,EAAD,CACE0C,OAAQW,EACRV,YAAa,kBAAMW,GAAsB,IACzCV,cAAeA,EACfC,iBAAkB7C,QCsFX0D,EA7HY,WAAO,IAAD,EACT/C,mBAAiB,IADR,mBACxBuC,EADwB,KACnBS,EADmB,OAEThD,mBAAiB,IAFR,mBAExBwC,EAFwB,KAEnBS,EAFmB,OAGKjD,mBAAiB,IAHtB,mBAGxBkD,EAHwB,KAGZC,EAHY,OAIKnD,mBAAiB,IAJtB,mBAIxBoD,EAJwB,KAIZC,EAJY,OAKKrD,mBAAS,WALd,mBAKxBX,EALwB,KAKZ4C,EALY,OAMOjC,mBAAmD,CAAE4C,IAAK,IAAKC,IAAK,MAN3E,mBAMxBJ,EANwB,KAMXa,EANW,KAOzBC,EAAQC,iBAAyB,MACjCC,EAAc,YAAI,IAAIC,IAAInB,EAAIrB,KAAI,SAACC,GAAD,MAAU,CAACA,EAAI,GAAQA,OAAQwC,UACpEC,MAAM,EAAG,IACTC,MAAK,SAACC,EAAGC,GAAJ,OAAUxC,OAAOwC,EAAE3C,IAAMG,OAAOuC,EAAE1C,OACpC4C,EAAc,YAAI,IAAIN,IAAIlB,EAAItB,KAAI,SAACC,GAAD,MAAU,CAACA,EAAI,GAAQA,OAAQwC,UACpEC,MAAM,EAAG,IACTC,MAAK,SAACC,EAAGC,GAAJ,OAAUxC,OAAOuC,EAAE1C,IAAMG,OAAOwC,EAAE3C,OAEpC6C,EAAa,WACbV,EAAMW,UACRX,EAAMW,QAAQC,QACdZ,EAAMW,QAAU,OAIdE,EAAuB,SAACC,GAC5BrB,EAAQqB,EAAKC,KAA4BC,IAAIV,MAAK,SAACC,EAAGC,GAAJ,OAAUxC,OAAOwC,EAAE3C,IAAMG,OAAOuC,EAAE1C,OAAKwC,MAAM,EAAG,KAClGX,EAAQoB,EAAKC,KAA4BE,KAAKX,MAAK,SAACC,EAAGC,GAAJ,OAAUxC,OAAOuC,EAAE1C,IAAMG,OAAOwC,EAAE3C,OAAKwC,MAAM,EAAG,MAG/Fa,EAA4B,SAACJ,GACjC,IAAMK,EAAUL,EAAKC,KAAiCK,MAAMC,EACtDC,EAAUR,EAAKC,KAAiCK,MAAMG,EAC5DxB,EAAe,CAAEV,IAAK8B,EAAQ7B,IAAKgC,KAG/BE,EAAmB,SAACV,GACxBlB,EACEkB,EAAKW,QAAQC,QACVC,QAAO,SAAC/D,GAAD,OAAUA,EAAKgE,OAA4B,QAAnBhE,EAAKiE,aACpClE,KAAI,SAACC,GAAD,OAAUA,EAAKgE,SACnBE,QAELhC,EACEgB,EAAKW,QAAQC,QACVC,QAAO,SAAC/D,GAAD,OAAUA,EAAKgE,OAA4B,SAAnBhE,EAAKiE,aACpClE,KAAI,SAACC,GAAD,OAAUA,EAAKgE,SACnBE,SAIDC,EAAwB,SAACjB,GAC7B,IAAMK,EAASL,EAAKW,QAAQ,GAAGJ,EACzBC,EAASR,EAAKW,QAAQ,GAAGF,EAC/BxB,EAAe,CAAEV,IAAK8B,EAAQ7B,IAAKgC,KAG/BU,EAAkB,WACtBpC,EAAc,IACdE,EAAc,KAGVmC,EAAW,SAACC,GAChBlC,EAAMW,QTrCY,SACpB7E,EACAqG,EACAX,EACAO,EACAlB,EACAK,EACAc,GAEA,IAAMI,EAAK,IAAIC,UD5BI,uCCwDnB,OA1BAD,EAAGpF,iBAAiB,QAAQ,WAC1BoF,EAAGE,KAAKhG,EAAaT,EAAcC,KACnCsG,EAAGE,KAAKhG,EAAaP,EAAgBD,KACrCsG,EAAGE,KAAKtG,EAAQH,EAAcC,KAC9BsG,EAAGE,KAAKtG,EAAQD,EAAgBD,QAGlCsG,EAAGpF,iBAAiB,QAASmF,GAC7BC,EAAGpF,iBAAiB,QAASmF,GAE7BC,EAAGpF,iBAAiB,WAAW,SAACuF,GAC9B,IAAMzB,EAAO3E,KAAKqG,MAAMD,EAAMzB,MAC9B,IACsD,IAAD,EAA/CA,EAAK5E,SAAWN,GAClB,UAAAkF,EAAKC,KAAKC,WAAV,eAAezB,QAASsB,EAAqBC,GAAQI,EAA0BJ,GACtEA,EAAK5E,SAAWN,GAAoD,sBAA7BkF,EAAK2B,MAAMnF,MAAM,KAAK,GACtEkE,EAAiBV,GACRA,EAAK5E,SAAWN,GAAoD,UAA7BkF,EAAK2B,MAAMnF,MAAM,KAAK,GACtEyE,EAAsBjB,GACbA,EAAK5E,SAAWN,GACzBoG,IAEF,MAAOU,GACPC,QAAQC,IAAIF,OAGTN,ESAWS,CACdX,EACAxB,EACAc,EACAO,EACAlB,EACAK,EACAc,IA+CJ,OApCAjF,qBACE,kBAAM,WACAiD,EAAMW,STrEmB,SAACyB,EAAetG,GACjDsG,EAAGE,KAAKtG,EAAQH,EAAcC,GAAaH,IAC3CyG,EAAGE,KAAKtG,EAAQD,EAAgBD,GAAaH,ISoEvCmH,CAAoB9C,EAAMW,QAAS7E,MAGvC,CAACA,IAGHiB,qBAAU,WAAO,IAAD,IACViD,EAAMW,UAAW,UAAAX,EAAMW,eAAN,eAAeoC,eAAf,UAA8B/C,EAAMW,eAApC,aAA8B,EAAeqC,OTxErC,SAACZ,EAAetG,GAC/CsG,EAAGE,KAAKhG,EAAaT,EAAcC,KACnCsG,EAAGE,KAAKhG,EAAaP,EAAgBD,KACrCsG,EAAGE,KAAKtG,EAAQH,EAAcC,KAC9BsG,EAAGE,KAAKtG,EAAQD,EAAgBD,KSqE5BmH,CAAkBjD,EAAMW,QAAS7E,KAElC,CAACA,IAEJiB,qBAAU,WArBHmG,UAAUC,QAGflB,EAASnG,KAqBR,IAEHiB,qBAAU,WACR,GAAIiC,EAAIO,OAAS,IAAK,CACpB,IAAM6D,EAAS,YAAI,IAAIjD,IAAInB,EAAIrB,KAAI,SAACC,GAAD,MAAU,CAACA,EAAI,GAAQA,OAAQwC,UAAUC,MAAM,EAAG,IACrFZ,EAAO2D,GAET,GAAInE,EAAIM,OAAS,IAAK,CACpB,IAAM8D,EAAS,YAAI,IAAIlD,IAAIlB,EAAItB,KAAI,SAACC,GAAD,MAAU,CAACA,EAAI,GAAQA,OAAQwC,UAAUC,MAAM,EAAG,IACrFX,EAAO2D,MAER,CAACrE,EAAIO,OAAQN,EAAIM,OAAQP,EAAKC,IAEjClC,qBAAU,WACRiC,EAAIsE,QAAJ,MAAAtE,EAAG,YAAYW,IACfV,EAAIqE,QAAJ,MAAArE,EAAG,YAAYY,MACd,CAACF,EAAYE,EAAYb,EAAKC,IAG/B,cAAC,EAAD,CACED,IAAKkB,EACLjB,IAAKwB,EACLvB,YAAaA,EACbR,cAAeA,EACf5C,WAAYA,KChIHyH,EAFH,kBAAM,cAAC,EAAD,KCYHC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCHdQ,IAASC,OACP,cAAC,aAAD,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,OAAgBa,K","file":"static/js/main.2f2a88cf.chunk.js","sourcesContent":["// Consts\nexport const requestsLimit = 50;\n\nexport const requestAction = {\n  SUBSCRIBE_PUBLIC: 'subscribe-public',\n  PROXY: 'proxy',\n  UNSUBSCRIBE: 'unsubscribe'\n};\n\nexport const responseAction = {\n  PROXY_RESPONSE: 'proxy-response',\n  PUSH: 'push',\n  SUBSCRIBE_PUBLIC_CONFIRM: 'subscribe-public-confirm'\n};\n\n// Urls\nexport const wsUrl = 'wss://api.zonda.exchange/websocket/';\nexport const orderbookPath = (marketCode: string) => `orderbook-limited/${marketCode}/${requestsLimit}`;\nexport const marketStatsPath = (marketCode: string) => `stats/${marketCode}`;\n","import { PushOrdersData, PushMarketStatsData, SnaptshotData } from 'types/types';\nimport { requestAction, orderbookPath, wsUrl, responseAction, marketStatsPath } from 'consts/consts';\n\nexport const currencyFormat = (amount: string | number) => Number(amount).toFixed(2);\n\nexport const spreadValue = (topBid: string, topAsk: string) =>\n  topBid && topAsk ? (Number(topAsk) - Number(topBid)).toFixed(2) : '-';\n\nexport const apiCall = (path: string, action = requestAction.SUBSCRIBE_PUBLIC) =>\n  JSON.stringify({\n    action,\n    module: 'trading',\n    path\n  });\n\nexport const snapshotCall = (path: string) =>\n  JSON.stringify({\n    requestId: '78539fe0-e9b0-4e4e-8c86-70b36aa93d4f',\n    action: requestAction.PROXY,\n    module: 'trading',\n    path\n  });\n\nexport const unsubscribeToMarket = (ws: WebSocket, marketCode: string) => {\n  ws.send(apiCall(orderbookPath(marketCode), requestAction.UNSUBSCRIBE));\n  ws.send(apiCall(marketStatsPath(marketCode), requestAction.UNSUBSCRIBE));\n};\n\nexport const subscribeToMarket = (ws: WebSocket, marketCode: string) => {\n  ws.send(snapshotCall(orderbookPath(marketCode)));\n  ws.send(snapshotCall(marketStatsPath(marketCode)));\n  ws.send(apiCall(orderbookPath(marketCode)));\n  ws.send(apiCall(marketStatsPath(marketCode)));\n};\n\nexport const initWs = (\n  marketCode: string,\n  handleDisconnect: () => void,\n  handlePushOrders: (value: PushOrdersData) => void,\n  handlePushMarketStats: (value: PushMarketStatsData) => void,\n  handleOrdersSnapshot: (value: SnaptshotData) => void,\n  handleMarketStatsSnapshot: (value: SnaptshotData) => void,\n  handleSubscribe: () => void\n) => {\n  const ws = new WebSocket(wsUrl);\n\n  ws.addEventListener('open', () => {\n    ws.send(snapshotCall(orderbookPath(marketCode)));\n    ws.send(snapshotCall(marketStatsPath(marketCode)));\n    ws.send(apiCall(orderbookPath(marketCode)));\n    ws.send(apiCall(marketStatsPath(marketCode)));\n  });\n\n  ws.addEventListener('error', handleDisconnect);\n  ws.addEventListener('close', handleDisconnect);\n\n  ws.addEventListener('message', (event) => {\n    const data = JSON.parse(event.data);\n    try {\n      if (data.action === responseAction.PROXY_RESPONSE) {\n        data.body.buy?.length ? handleOrdersSnapshot(data) : handleMarketStatsSnapshot(data);\n      } else if (data.action === responseAction.PUSH && data.topic.split('/')[1] === 'orderbook-limited') {\n        handlePushOrders(data);\n      } else if (data.action === responseAction.PUSH && data.topic.split('/')[1] === 'stats') {\n        handlePushMarketStats(data);\n      } else if (data.action === responseAction.SUBSCRIBE_PUBLIC_CONFIRM) {\n        handleSubscribe();\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  });\n  return ws;\n};\n","import { useEffect, useState } from 'react';\n\nconst useMobile = () => {\n  const [width, setWidth] = useState<number>(window.innerWidth);\n\n  const handleWindowSizeChange = () => {\n    setWidth(window.innerWidth);\n  };\n\n  useEffect(() => {\n    window.addEventListener('resize', handleWindowSizeChange);\n    return () => {\n      window.removeEventListener('resize', handleWindowSizeChange);\n    };\n  }, []);\n\n  const isMobile = width <= 820;\n\n  return isMobile;\n};\n\nexport default useMobile;\n","import useMobile from 'hooks/useMobile';\nimport './OrderbookFeedHeader.scss';\n\nconst OrderbookFeedHeader = ({ feedType, marketCode }: { feedType: string; marketCode: string }) => {\n  const isMobile = useMobile();\n  const cryptocurrency = marketCode.split('-')[0];\n  const currency = marketCode.split('-')[1];\n  return (\n    <div className={`orderbook-header orderbook-header--${feedType}`}>\n      <div className=\"orderbook-header__item\">\n        <span className=\"orderbook-header__prefix\">{feedType}</span> - {feedType === 'bid' ? 'kupno' : 'sprzedaż'}\n      </div>\n      {!isMobile && <div className=\"orderbook-header__item\">ilość ({cryptocurrency})</div>}\n      <div className=\"orderbook-header__item\">wartość ({currency})</div>\n      {!isMobile && <div className=\"orderbook-header__item\">liczba ofert</div>}\n    </div>\n  );\n};\n\nexport default OrderbookFeedHeader;\n","import { currencyFormat } from 'helpers/helpers';\nimport useMobile from 'hooks/useMobile';\nimport { Feed } from 'types/types';\nimport './OrderbookFeedRow.scss';\n\nconst OrderbookFeedRow = ({ feed, feedType }: { feed: Feed[]; feedType: string }) => {\n  const isMobile = useMobile();\n  return (\n    <>\n      {feed.map((item) => (\n        <div className={`orderbook-row orderbook-row--${feedType}`} key={item.ra}>\n          <div className=\"orderbook-row__item\">{item.ra}</div>\n          {!isMobile && <div className=\"orderbook-row__item\">{item.ca}</div>}\n          <div className=\"orderbook-row__item\">{currencyFormat(Number(item.ra) * Number(item.ca))}</div>\n          {!isMobile && <div className=\"orderbook-row__item\">{item.co}</div>}\n        </div>\n      ))}\n    </>\n  );\n};\n\nexport default OrderbookFeedRow;\n","import { Feed } from 'types/types';\nimport OrderbookFeedHeader from './OrderbookFeedHeader';\nimport OrderbookFeedRow from './OrderbookFeedRow';\n\nconst OrderbookFeedTable = ({ feed, feedType, marketCode }: { feed: Feed[]; feedType: string; marketCode: string }) => (\n  <div>\n    <OrderbookFeedHeader feedType={feedType} marketCode={marketCode} />\n    <OrderbookFeedRow feed={feed} feedType={feedType} />\n  </div>\n);\n\nexport default OrderbookFeedTable;\n","import './Loader.scss';\n\nconst Loader = () => <div className=\"loader\" data-testid=\"orderbook-loader\" />;\n\nexport default Loader;\n","const currenciesPairs = [\n  'BTC-PLN',\n  'ETH-PLN',\n  'AAVE-PLN',\n  'ADA-PLN',\n  'ALG-PLN',\n  'AMLT-PLN',\n  'ATRI-PLN',\n  'AVAX-PLN',\n  'BAT-PLN',\n  'BCC-PLN',\n  'BCP-PLN',\n  'BOB-PLN',\n  'BSV-PLN',\n  'BTG-PLN',\n  'CHZ-PLN',\n  'COMP-PLN',\n  'DAI-PLN',\n  'DASH-PLN',\n  'DOGE-PLN',\n  'DOT-PLN',\n  'ENJ-PLN',\n  'EOS-PLN',\n  'FTM-PLN',\n  'GAME-PLN',\n  'GNT-PLN',\n  'GRT-PLN',\n  'LINK-PLN',\n  'LSK-PLN',\n  'LML-PLN',\n  'LTC-PLN',\n  'LUNA-PLN',\n  'MANA-PLN',\n  'MATIC-PLN',\n  'MKR-PLN',\n  'NEU-PLN',\n  'OMG-PLN',\n  'PAY-PLN',\n  'REEF-PLN',\n  'REP-PLN',\n  'SUSHI-PLN',\n  'SXP-PLN',\n  'TRX-PLN',\n  'UNI-PLN',\n  'USDC-PLN',\n  'USDT-PLN',\n  'WIS-PLN',\n  'XIN-PLN',\n  'XLM-PLN',\n  'XRP-PLN',\n  'XTZ-PLN',\n  'ZEC-PLN',\n  'ZRX-PLN'\n];\n\nexport default currenciesPairs;\n","import currenciesPairs from 'components/Orderbook/currenciesPairs';\nimport './CurrencyDrawer.scss';\n\nconst CurrencyDrawer = ({\n  isOpen,\n  handleClose,\n  setMarketCode,\n  activeMarketCode\n}: {\n  isOpen: boolean;\n  handleClose: () => void;\n  setMarketCode: (value: string) => void;\n  activeMarketCode: string;\n}) => {\n  const selectPair = (pair: string) => {\n    setMarketCode(pair);\n    handleClose();\n  };\n\n  return (\n    <>\n      <div className={`currencyDrawer ${isOpen ? 'currencyDrawer--open' : ''}`} data-testid=\"currency-drawer\">\n        <div className=\"currencyDrawer__closeIcon\" onClick={handleClose} />\n        {currenciesPairs.map((marketCode) => (\n          <div\n            key={marketCode}\n            className={`currencyDrawer__item ${\n              activeMarketCode === marketCode ? 'currencyDrawer__item--selected' : ''\n            }`}\n            onClick={() => selectPair(marketCode)}\n            data-testid=\"currency-item\"\n          >\n            {marketCode}\n          </div>\n        ))}\n      </div>\n      <div\n        onClick={handleClose}\n        className={`currencyDrawer__overlay ${isOpen ? 'currencyDrawer__overlay--open' : ''}`}\n      />\n    </>\n  );\n};\n\nexport default CurrencyDrawer;\n","import OrderbookFeedTable from 'components/OrderbookFeedTable/OrderbookFeedTable';\nimport { OrderbookProps } from 'types/types';\nimport './Orderbook.scss';\nimport { spreadValue } from 'helpers/helpers';\nimport Loader from 'components/Loader/Loader';\nimport { useState } from 'react';\nimport CurrencyDrawer from 'components/CurrencyDrawer/CurrencyDrawer';\n\nconst Orderbook = ({ bid, ask, marketStats, setMarketCode, marketCode }: OrderbookProps) => {\n  const [isCurrencyDrawerOpen, setCurrencyDrawerOpen] = useState(false);\n  return (\n    <div className=\"orderbook\">\n      <div className=\"orderbook__header\">\n        <div className=\"orderbook__header-item\">\n          <button\n            className=\"orderbook__button\"\n            data-testid=\"currencies-button\"\n            onClick={() => setCurrencyDrawerOpen(true)}\n          >\n            {marketCode}\n          </button>\n        </div>\n        <div className=\"orderbook__header-item\">\n          <div className=\"orderbook__header-item-title\">Spread:</div>\n          <div className=\"orderbook__header-item-value\" data-testid=\"spreadValue\">\n            {spreadValue(bid[0]?.ra, ask[0]?.ra)}\n          </div>\n        </div>\n        <div className=\"orderbook__header-item\">\n          <div className=\"orderbook__market-stats\">\n            <div className=\"orderbook__market-stats-item\">\n              <span>Najwyższa (24h)</span> <span>{marketStats.max}</span>\n            </div>\n            <div className=\"orderbook__market-stats-item\">\n              <span>Najniższa (24h)</span> <span>{marketStats.min}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n      {bid.length && ask.length ? (\n        <div className=\"orderbook__container\" data-testid=\"orderbook-table\">\n          <OrderbookFeedTable feed={bid} feedType=\"bid\" marketCode={marketCode} />\n          <OrderbookFeedTable feed={ask} feedType=\"ask\" marketCode={marketCode} />\n        </div>\n      ) : (\n        <Loader />\n      )}\n      <CurrencyDrawer\n        isOpen={isCurrencyDrawerOpen}\n        handleClose={() => setCurrencyDrawerOpen(false)}\n        setMarketCode={setMarketCode}\n        activeMarketCode={marketCode}\n      />\n    </div>\n  );\n};\n\nexport default Orderbook;\n","import { useEffect, useRef, useState } from 'react';\nimport { initWs, subscribeToMarket, unsubscribeToMarket } from 'helpers/helpers';\nimport Orderbook from 'components/Orderbook/Orderbook';\nimport {\n  Feed,\n  PushOrdersData,\n  PushMarketStatsData,\n  SnaptshotData,\n  OrdersSnapshotBody,\n  MarketStatsSnapshotBody\n} from 'types/types';\n\nconst OrderbookContainer = () => {\n  const [bid, setBid] = useState<Feed[]>([]);\n  const [ask, setAsk] = useState<Feed[]>([]);\n  const [updatedBid, setUpdatedBid] = useState<Feed[]>([]);\n  const [updatedAsk, setUpdatedAsk] = useState<Feed[]>([]);\n  const [marketCode, setMarketCode] = useState('BTC-PLN');\n  const [marketStats, setMarketStats] = useState<{ max: number | '-'; min: number | '-' }>({ max: '-', min: '-' });\n  const wsRef = useRef<WebSocket | null>(null);\n  const preparedBid = [...new Map(bid.map((item) => [item['ra'], item])).values()]\n    .slice(0, 25)\n    .sort((a, b) => Number(b.ra) - Number(a.ra));\n  const preparedAsk = [...new Map(ask.map((item) => [item['ra'], item])).values()]\n    .slice(0, 25)\n    .sort((a, b) => Number(a.ra) - Number(b.ra));\n\n  const disconnect = () => {\n    if (wsRef.current) {\n      wsRef.current.close();\n      wsRef.current = null;\n    }\n  };\n\n  const handleOrdersSnapshot = (data: SnaptshotData) => {\n    setBid((data.body as OrdersSnapshotBody).buy.sort((a, b) => Number(b.ra) - Number(a.ra)).slice(0, 25));\n    setAsk((data.body as OrdersSnapshotBody).sell.sort((a, b) => Number(a.ra) - Number(b.ra)).slice(0, 25));\n  };\n\n  const handleMarketStatsSnapshot = (data: SnaptshotData) => {\n    const max24h = (data.body as MarketStatsSnapshotBody).stats.h;\n    const min24h = (data.body as MarketStatsSnapshotBody).stats.l;\n    setMarketStats({ max: max24h, min: min24h });\n  };\n\n  const handlePushOrders = (data: PushOrdersData) => {\n    setUpdatedBid(\n      data.message.changes\n        .filter((item) => item.state && item.entryType === 'Buy')\n        .map((item) => item.state)\n        .flat()\n    );\n    setUpdatedAsk(\n      data.message.changes\n        .filter((item) => item.state && item.entryType === 'Sell')\n        .map((item) => item.state)\n        .flat()\n    );\n  };\n\n  const handlePushMarketStats = (data: PushMarketStatsData) => {\n    const max24h = data.message[0].h;\n    const min24h = data.message[0].l;\n    setMarketStats({ max: max24h, min: min24h });\n  };\n\n  const handleSubscribe = () => {\n    setUpdatedBid([]);\n    setUpdatedAsk([]);\n  };\n\n  const initFeed = (newMarketCode: string) => {\n    wsRef.current = initWs(\n      newMarketCode,\n      disconnect,\n      handlePushOrders,\n      handlePushMarketStats,\n      handleOrdersSnapshot,\n      handleMarketStatsSnapshot,\n      handleSubscribe\n    );\n  };\n\n  const connect = () => {\n    if (!navigator.onLine) {\n      return;\n    }\n    initFeed(marketCode);\n  };\n\n  useEffect(\n    () => () => {\n      if (wsRef.current) {\n        unsubscribeToMarket(wsRef.current, marketCode);\n      }\n    },\n    [marketCode]\n  );\n\n  useEffect(() => {\n    if (wsRef.current && wsRef.current?.readyState === wsRef.current?.OPEN) {\n      subscribeToMarket(wsRef.current, marketCode);\n    }\n  }, [marketCode]);\n\n  useEffect(() => {\n    connect();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (bid.length > 200) {\n      const newBid = [...new Map(bid.map((item) => [item['ra'], item])).values()].slice(0, 25);\n      setBid(newBid);\n    }\n    if (ask.length > 200) {\n      const newAsk = [...new Map(ask.map((item) => [item['ra'], item])).values()].slice(0, 25);\n      setAsk(newAsk);\n    }\n  }, [bid.length, ask.length, bid, ask]);\n\n  useEffect(() => {\n    bid.unshift(...updatedBid);\n    ask.unshift(...updatedAsk);\n  }, [updatedBid, updatedAsk, bid, ask]);\n\n  return (\n    <Orderbook\n      bid={preparedBid}\n      ask={preparedAsk}\n      marketStats={marketStats}\n      setMarketCode={setMarketCode}\n      marketCode={marketCode}\n    />\n  );\n};\n\nexport default OrderbookContainer;\n","import OrderbookContainer from './components/Orderbook/OrderbookContainer';\n\nconst App = () => <OrderbookContainer />;\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry: ReportHandler | undefined) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { StrictMode } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(undefined);\n"],"sourceRoot":""}