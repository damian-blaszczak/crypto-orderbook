(this["webpackJsonporder-book-app"]=this["webpackJsonporder-book-app"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(1),c=r(7),a=r.n(c),o=(r(12),r(3)),s=r(2),i="subscribe-public",d="proxy",u="unsubscribe",b="proxy-response",l="push",j="subscribe-public-confirm",N=function(e){return"orderbook-limited/".concat(e,"/").concat(50)},f=function(e){return"stats/".concat(e)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return JSON.stringify({action:t,module:"trading",path:e})},O=function(e){return JSON.stringify({requestId:"78539fe0-e9b0-4e4e-8c86-70b36aa93d4f",action:d,module:"trading",path:e})},h=function(){var e=Object(n.useState)(window.innerWidth),t=Object(s.a)(e,2),r=t[0],c=t[1],a=function(){c(window.innerWidth)};return Object(n.useEffect)((function(){return window.addEventListener("resize",a),function(){window.removeEventListener("resize",a)}}),[]),r<=820},v=(r(13),r(0)),L=function(e){var t=e.feedType,r=e.marketCode,n=h(),c=r.split("-")[0],a=r.split("-")[1];return Object(v.jsxs)("div",{className:"orderbook-header orderbook-header--".concat(t),children:[Object(v.jsxs)("div",{className:"orderbook-header__item",children:[Object(v.jsx)("span",{className:"orderbook-header__prefix",children:t})," - ","bid"===t?"kupno":"sprzeda\u017c"]}),!n&&Object(v.jsxs)("div",{className:"orderbook-header__item",children:["ilo\u015b\u0107 (",c,")"]}),Object(v.jsxs)("div",{className:"orderbook-header__item",children:["warto\u015b\u0107 (",a,")"]}),!n&&Object(v.jsx)("div",{className:"orderbook-header__item",children:"liczba ofert"})]})},p=(r(15),function(e){var t=e.feed,r=e.feedType,n=h();return Object(v.jsx)(v.Fragment,{children:t.map((function(e){return Object(v.jsxs)("div",{className:"orderbook-row orderbook-row--".concat(r),children:[Object(v.jsx)("div",{className:"orderbook-row__item",children:e.ra}),!n&&Object(v.jsx)("div",{className:"orderbook-row__item",children:e.ca}),Object(v.jsx)("div",{className:"orderbook-row__item",children:(t=Number(e.ra)*Number(e.ca),Number(t).toFixed(2))}),!n&&Object(v.jsx)("div",{className:"orderbook-row__item",children:e.co})]},e.ra);var t}))})}),P=function(e){var t=e.feed,r=e.feedType,n=e.marketCode;return Object(v.jsxs)("div",{children:[Object(v.jsx)(L,{feedType:r,marketCode:n}),Object(v.jsx)(p,{feed:t,feedType:r})]})},k=(r(16),r(17),function(){return Object(v.jsx)("div",{className:"loader"})}),x=["BTC-PLN","ETH-PLN","AAVE-PLN","ADA-PLN","ALG-PLN","AMLT-PLN","ATRI-PLN","AVAX-PLN","BAT-PLN","BCC-PLN","BCP-PLN","BOB-PLN","BSV-PLN","BTG-PLN","CHZ-PLN","COMP-PLN","DAI-PLN","DASH-PLN","DOGE-PLN","DOT-PLN","ENJ-PLN","EOS-PLN","FTM-PLN","GAME-PLN","GNT-PLN","GRT-PLN","LINK-PLN","LSK-PLN","LML-PLN","LTC-PLN","LUNA-PLN","MANA-PLN","MATIC-PLN","MKR-PLN","NEU-PLN","OMG-PLN","PAY-PLN","REEF-PLN","REP-PLN","SUSHI-PLN","SXP-PLN","TRX-PLN","UNI-PLN","USDC-PLN","USDT-PLN","WIS-PLN","XIN-PLN","XLM-PLN","XRP-PLN","XTZ-PLN","ZEC-PLN","ZRX-PLN"],_=(r(18),function(e){var t=e.isOpen,r=e.handleClose,n=e.setMarketCode,c=e.activeMarketCode;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"currencyDrawer ".concat(t?"currencyDrawer--open":""),children:[Object(v.jsx)("div",{className:"currencyDrawer__closeIcon",onClick:r}),x.map((function(e){return Object(v.jsx)("div",{className:"currencyDrawer__item ".concat(c===e?"currencyDrawer__item--selected":""),onClick:function(){return n(e),void r()},children:e},e)}))]}),Object(v.jsx)("div",{onClick:r,className:"currencyDrawer__overlay ".concat(t?"currencyDrawer__overlay--open":"")})]})}),y=function(e){var t,r,c,a,o=e.bid,i=e.ask,d=e.marketStats,u=e.setMarketCode,b=e.marketCode,l=Object(n.useState)(!1),j=Object(s.a)(l,2),N=j[0],f=j[1];return Object(v.jsxs)("div",{className:"orderbook",children:[Object(v.jsxs)("div",{className:"orderbook__header",children:[Object(v.jsx)("div",{className:"orderbook__header-item",children:Object(v.jsx)("button",{className:"orderbook__button",onClick:function(){return f(!0)},children:b})}),Object(v.jsxs)("div",{className:"orderbook__header-item",children:[Object(v.jsx)("div",{className:"orderbook__header-item-title",children:"Spread:"}),Object(v.jsx)("div",{className:"orderbook__header-item-value",children:(c=null===(t=o[0])||void 0===t?void 0:t.ra,a=null===(r=i[0])||void 0===r?void 0:r.ra,c&&a?(Number(a)-Number(c)).toFixed(2):"-")})]}),Object(v.jsx)("div",{className:"orderbook__header-item",children:Object(v.jsxs)("div",{className:"orderbook__market-stats",children:[Object(v.jsxs)("div",{className:"orderbook__market-stats-item",children:[Object(v.jsx)("span",{children:"Najwy\u017csza (24h)"})," ",Object(v.jsx)("span",{children:d.max})]}),Object(v.jsxs)("div",{className:"orderbook__market-stats-item",children:[Object(v.jsx)("span",{children:"Najni\u017csza (24h)"})," ",Object(v.jsx)("span",{children:d.min})]})]})})]}),o.length&&i.length?Object(v.jsxs)("div",{className:"orderbook__container",children:[Object(v.jsx)(P,{feed:o,feedType:"bid",marketCode:b}),Object(v.jsx)(P,{feed:i,feedType:"ask",marketCode:b})]}):Object(v.jsx)(k,{}),Object(v.jsx)(_,{isOpen:N,handleClose:function(){return f(!1)},setMarketCode:u,activeMarketCode:b})]})},C=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)([]),i=Object(s.a)(a,2),d=i[0],h=i[1],L=Object(n.useState)([]),p=Object(s.a)(L,2),P=p[0],k=p[1],x=Object(n.useState)([]),_=Object(s.a)(x,2),C=_[0],w=_[1],g=Object(n.useState)("BTC-PLN"),S=Object(s.a)(g,2),T=S[0],E=S[1],M=Object(n.useState)({max:"-",min:"-"}),A=Object(s.a)(M,2),D=A[0],B=A[1],I=Object(n.useRef)(null),F=Object(o.a)(new Map(r.map((function(e){return[e.ra,e]}))).values()).slice(0,25).sort((function(e,t){return Number(t.ra)-Number(e.ra)})),R=Object(o.a)(new Map(d.map((function(e){return[e.ra,e]}))).values()).slice(0,25).sort((function(e,t){return Number(e.ra)-Number(t.ra)})),X=function(){I.current&&(I.current.close(),I.current=null)},z=function(e){c(e.body.buy.sort((function(e,t){return Number(t.ra)-Number(e.ra)})).slice(0,25)),h(e.body.sell.sort((function(e,t){return Number(e.ra)-Number(t.ra)})).slice(0,25))},G=function(e){var t=e.body.stats.h,r=e.body.stats.l;B({max:t,min:r})},J=function(e){k(e.message.changes.filter((function(e){return e.state&&"Buy"===e.entryType})).map((function(e){return e.state})).flat()),w(e.message.changes.filter((function(e){return e.state&&"Sell"===e.entryType})).map((function(e){return e.state})).flat())},U=function(e){var t=e.message[0].h,r=e.message[0].l;B({max:t,min:r})},H=function(){k([]),w([])},W=function(e){I.current=function(e,t,r,n,c,a,o){var s=new WebSocket("wss://api.zonda.exchange/websocket/");return s.addEventListener("open",(function(){s.send(O(N(e))),s.send(O(f(e))),s.send(m(N(e))),s.send(m(f(e)))})),s.addEventListener("error",t),s.addEventListener("close",t),s.addEventListener("message",(function(e){var t=JSON.parse(e.data);try{var s;t.action===b?(null===(s=t.body.buy)||void 0===s?void 0:s.length)?c(t):a(t):t.action===l&&"orderbook-limited"===t.topic.split("/")[1]?r(t):t.action===l&&"stats"===t.topic.split("/")[1]?n(t):t.action===j&&o()}catch(i){console.log(i)}})),s}(e,X,J,U,z,G,H)};return Object(n.useEffect)((function(){return function(){I.current&&function(e,t){e.send(m(N(t),u)),e.send(m(f(t),u))}(I.current,T)}}),[T]),Object(n.useEffect)((function(){var e,t;I.current&&(null===(e=I.current)||void 0===e?void 0:e.readyState)===(null===(t=I.current)||void 0===t?void 0:t.OPEN)&&function(e,t){e.send(O(N(t))),e.send(O(f(t))),e.send(m(N(t))),e.send(m(f(t)))}(I.current,T)}),[T]),Object(n.useEffect)((function(){navigator.onLine&&W(T)}),[]),Object(n.useEffect)((function(){if(r.length>200){var e=Object(o.a)(new Map(r.map((function(e){return[e.ra,e]}))).values()).slice(0,25);c(e)}if(d.length>200){var t=Object(o.a)(new Map(d.map((function(e){return[e.ra,e]}))).values()).slice(0,25);h(t)}}),[r.length,d.length,r,d]),Object(n.useEffect)((function(){r.unshift.apply(r,Object(o.a)(P)),d.unshift.apply(d,Object(o.a)(C))}),[P,C,r,d]),Object(v.jsx)(y,{bid:F,ask:R,marketStats:D,setMarketCode:E,marketCode:T})},w=function(){return Object(v.jsx)(C,{})},g=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,20)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;r(e),n(e),c(e),a(e),o(e)}))};a.a.render(Object(v.jsx)(n.StrictMode,{children:Object(v.jsx)(w,{})}),document.getElementById("root")),g(void 0)}],[[19,1,2]]]);
//# sourceMappingURL=main.8eeda048.chunk.js.map